<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PHCM9795: Foundations of Biostatistics - 2 Stata notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./02.2-probability-R.html" rel="next">
<link href="./02-probability.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><strong>2</strong> Stata notes</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PHCM9795: Foundations of Biostatistics</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to statistics and presenting data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.1-intro-stata.html" class="sidebar-item-text sidebar-link"><strong>1</strong> An introduction to Stata</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.2-intro-R.html" class="sidebar-item-text sidebar-link"><strong>1</strong> An introduction to R and RStudio</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.3-intro-activities.html" class="sidebar-item-text sidebar-link"><strong>1</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-probability.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Probability and probability distributions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.1-probability-stata.html" class="sidebar-item-text sidebar-link active"><strong>2</strong> Stata notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.2-probability-R.html" class="sidebar-item-text sidebar-link"><strong>2</strong> R notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.3-probability-activities.html" class="sidebar-item-text sidebar-link"><strong>2</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-precision.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Precision, standard errors and confidence intervals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.1-precision-stata.html" class="sidebar-item-text sidebar-link"><strong>3</strong> Stata notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.2-precision-R.html" class="sidebar-item-text sidebar-link"><strong>3</strong> R notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.3-precision-activities.html" class="sidebar-item-text sidebar-link"><strong>3</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-hypothesis-testing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Hypothesis testing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04.1-hypothesis-testing-stata.html" class="sidebar-item-text sidebar-link"><strong>4</strong> Stata notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04.2-hypothesis-testing-R.html" class="sidebar-item-text sidebar-link"><strong>4</strong> R notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04.3-hypothesis-testing-activities.html" class="sidebar-item-text sidebar-link"><strong>4</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-comparing-two-means.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Comparing the means of two groups</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05.1-comparing-two-means-stata.html" class="sidebar-item-text sidebar-link"><strong>5</strong> Stata notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05.2-comparing-two-means-R.html" class="sidebar-item-text sidebar-link"><strong>5</strong> R notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05.3-comparing-two-means-activities.html" class="sidebar-item-text sidebar-link"><strong>5</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-proportions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summary statistics for binary data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06.1-proportions-stata.html" class="sidebar-item-text sidebar-link"><strong>6</strong> Stata notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06.2-proportions-R.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Summary statistics for binary data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06.3-proportions-activities.html" class="sidebar-item-text sidebar-link"><strong>6</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-testing-proportions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Hypothesis testing for categorical data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-correlation-and-regression.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Correlation and linear regression</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08.1-correlation-and-regression-stata.html" class="sidebar-item-text sidebar-link"><strong>8</strong> Stata notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08.2-correlation-and-regression-R.html" class="sidebar-item-text sidebar-link"><strong>8</strong> R notes</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08.3-correlation-and-regression-activities.html" class="sidebar-item-text sidebar-link"><strong>8</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-non-parametrics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Analysing non-normal data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09.1-non-parametrics-stata.html" class="sidebar-item-text sidebar-link"><strong>9</strong> Stata resources</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09.2-non-parametrics-R.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Analysing non-normal data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09.3-non-parametrics-activities.html" class="sidebar-item-text sidebar-link"><strong>9</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-sample-size.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Sample size estimation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10.1-sample-size-stata.html" class="sidebar-item-text sidebar-link"><strong>10</strong> Stata resources</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10.2-sample-size-R.html" class="sidebar-item-text sidebar-link"><strong>10</strong> R resources</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10.3-sample-size-activities.html" class="sidebar-item-text sidebar-link"><strong>10</strong> Learning Activities</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#importing-data-into-stata" id="toc-importing-data-into-stata" class="nav-link active" data-scroll-target="#importing-data-into-stata">Importing data into Stata</a>
  <ul class="collapse">
  <li><a href="#importing-plain-text-data-into-stata" id="toc-importing-plain-text-data-into-stata" class="nav-link" data-scroll-target="#importing-plain-text-data-into-stata">Importing plain text data into Stata</a></li>
  </ul></li>
  <li><a href="#checking-your-data-for-errors-in-stata" id="toc-checking-your-data-for-errors-in-stata" class="nav-link" data-scroll-target="#checking-your-data-for-errors-in-stata">Checking your data for errors in Stata</a></li>
  <li><a href="#overlaying-a-normal-curve-on-a-histogram" id="toc-overlaying-a-normal-curve-on-a-histogram" class="nav-link" data-scroll-target="#overlaying-a-normal-curve-on-a-histogram">Overlaying a Normal curve on a Histogram</a></li>
  <li><a href="#descriptive-statistics-for-checking-normality" id="toc-descriptive-statistics-for-checking-normality" class="nav-link" data-scroll-target="#descriptive-statistics-for-checking-normality">Descriptive statistics for checking normality</a></li>
  <li><a href="#import-excel" id="toc-import-excel" class="nav-link" data-scroll-target="#import-excel">Importing Excel data into Stata</a></li>
  <li><a href="#generating-new-variables" id="toc-generating-new-variables" class="nav-link" data-scroll-target="#generating-new-variables">Generating new variables</a></li>
  <li><a href="#summarising-data-by-another-variable" id="toc-summarising-data-by-another-variable" class="nav-link" data-scroll-target="#summarising-data-by-another-variable">Summarising data by another variable</a></li>
  <li><a href="#recoding-data" id="toc-recoding-data" class="nav-link" data-scroll-target="#recoding-data">Recoding data</a></li>
  <li><a href="#computing-binomial-probabilities-using-the-hand-calculator-in-stata" id="toc-computing-binomial-probabilities-using-the-hand-calculator-in-stata" class="nav-link" data-scroll-target="#computing-binomial-probabilities-using-the-hand-calculator-in-stata">Computing binomial probabilities using the Hand calculator in Stata</a></li>
  <li><a href="#computing-probabilities-from-the-normal-distribution-using-the-hand-calculator-in-stata" id="toc-computing-probabilities-from-the-normal-distribution-using-the-hand-calculator-in-stata" class="nav-link" data-scroll-target="#computing-probabilities-from-the-normal-distribution-using-the-hand-calculator-in-stata">Computing probabilities from the normal distribution using the Hand calculator in Stata</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><strong>2</strong> Stata notes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="importing-data-into-stata" class="level2">
<h2 class="anchored" data-anchor-id="importing-data-into-stata">Importing data into Stata</h2>
<p>We have described previously how to open data that have been saved as Stata .dta files. It is quite common to have data saved in other file types, such as Microsoft Excel, or plain text files. In this section, we will demonstrate how to import data from other packages into Stata using commands in the <strong>File &gt; Import</strong> menu.</p>
<section id="importing-plain-text-data-into-stata" class="level3">
<h3 class="anchored" data-anchor-id="importing-plain-text-data-into-stata">Importing plain text data into Stata</h3>
<p>A <code>csv</code> file, or a “comma separated variables” file is commonly used to store data. These files have a very simple structure: they are plain text files, where data are separated by commas. csv files have the advantage that, as they are plain text files, they can be opened by a large number of programs (such as Notepad in Windows, TextEdit in MacOS, Microsoft Excel - even Microsoft Word). While they can be opened by Microsoft Excel, they can be opened by many other programs: the csv file can be thought of as the lingua-franca of data.</p>
<p>In this demonstration, we will use data on the weight of 1000 people entered in a csv file called <code>weight_s2.csv</code> available on Moodle. To confirm that the file is readable by any text editor, here are the first ten lines of the file, opened in Notepad on Microsoft Windows, and TextEdit on MacOS.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/import-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>To import it into Stata, use <strong>File &gt; Import &gt; Text data (delimited, .csv, …)</strong> to bring up the import delimited text data dialog box. Click the <strong>Open</strong> button (the folder icon on the right-hand side of the window) and select the csv file you downloaded. The dialog box should look like below:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/import-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Here, Stata has (correctly) decided that the first row of the dataset contains the variable names. You may need to change this if the Preview window does not look correct. Click <strong>OK</strong> or <strong>Submit</strong> button to import the data.</p>
</section>
</section>
<section id="checking-your-data-for-errors-in-stata" class="level2">
<h2 class="anchored" data-anchor-id="checking-your-data-for-errors-in-stata">Checking your data for errors in Stata</h2>
<p>Before you start describing and analysing your data, it is important to make sure that no errors have been made during the data entry process. Basically, you are looking for values that are outside the range of possible or plausible values for that variable.</p>
<p>If an error is found, the best method for correcting the error is to go back to the original data e.g.&nbsp;the hard copy questionnaire, to obtain the original value, entering the correct value into Stata. If the original data is not available or the original data is also incorrect, the erroneous value is often excluded from the dataset.</p>
<p>For continuous variables, the easiest methods are to examine a boxplot and histogram. For example, a boxplot and histogram for the weight variable we just imported appear as:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/check-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>There is a clear outlying point shown in the boxplot. Although not obvious, the same point is shown in the histogram as a bar around 700 with a very short height.</p>
<p>To identify the outlying observation in the dataset, we can sort your data in ascending order and check the minimum and maximum values in the Data Editor. You will need to decide if these values are a data entry error or are biologically plausible. If an extreme value or “outlier”, is biologically plausible, it should be included in all analyses.</p>
<p>To sort data, you must be in the <strong>Data Editor (Edit)</strong> window. Select <strong>Data &gt; Sort data…</strong> and choose <code>weight</code> as shown in the <strong>sort</strong> dialog box below. Click <strong>OK</strong> to do an <em>ascending</em> sort (arranging weight from smallest to largest). [Command: <code>sort weight</code>]</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/check-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>By scrolling through the data, you will see that the values range from 53.8kg to 85.8kg with a very high value of 700.2kg. A value as high as 700kg is likely to be a data entry error (e.g.&nbsp;error in entering an extra zero) and is not a plausible weight value. Here, <strong>you should check your original data</strong>. You might find that the original weight was recorded as 70.2kg. You can change this in Stata by deleting a zero from cell with 700.2 in the <strong>Data Editor (Edit)</strong> window.</p>
<p>[Command: <code>replace weight = 70.2 in 1000</code>]</p>
<p><strong>Note:</strong> if an extreme value lies within the range of biological plausibility it should not be removed from analysis.</p>
<p>Once you have checked your data for errors, you are ready to start analysing your data.</p>
</section>
<section id="overlaying-a-normal-curve-on-a-histogram" class="level2">
<h2 class="anchored" data-anchor-id="overlaying-a-normal-curve-on-a-histogram">Overlaying a Normal curve on a Histogram</h2>
<p>It can be useful to produce a histogram with an overlayed Normal curve to assess whether our sample appears approximately Normally distributed. First go to menu <strong>Graphics &gt; Histogram</strong>. In the <strong>Histogram</strong> dialog box, select <code>weight</code> into the <strong>variable</strong> box and choose the <strong>Frequency</strong> radio button for ease of interpretation.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/hist-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>You can click the <strong>Submit</strong> button to check how the plot looks like. To superimpose the normal curve, go to the <strong>Density plots</strong> and tick <strong>Add normal-density plot</strong>, then click the <strong>Submit</strong> or <strong>OK</strong> button. You can change the X-axis label in the <strong>X axis</strong> tab, e.g.&nbsp;to <code>Weight (kg)</code>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/hist-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>[Command: <code>histogram weight, frequency normal xtitle(Weight (kg))</code>]</p>
<p>Your histogram should look like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/hist-03.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
</section>
<section id="descriptive-statistics-for-checking-normality" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics-for-checking-normality">Descriptive statistics for checking normality</h2>
<p>All the descriptive statistics including Skewness and Kurtosis discussed in this module can be obtained using the <code>summarize</code> command from <strong>Statistics &gt; Summaries, tables, and tests &gt; Summary and descriptive statistics &gt; Summary statistics</strong> and specifying <strong>detail</strong> as an option in Stata (as shown in the Stata Notes for Module 1).</p>
<p>[Command: <code>summarize weight, detail</code>]</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/desc-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>You can similarly repeat this using the dataset <code>Example_1.3.dta</code> used for creating these in the course notes for this module.</p>
</section>
<section id="import-excel" class="level2">
<h2 class="anchored" data-anchor-id="import-excel">Importing Excel data into Stata</h2>
<p>Another common type of file that data are stored in is a Microsoft Excel file (.xls or .xlsx). In this demonstration, we will import a selection of records from a large health survey, stored in the file <code>health-survey.xlsx</code>.</p>
<p>The health survey data contains 1140 records, comprising:</p>
<ul>
<li>sex: 1 = respondent identifies as male; 2 = respondent identifies as female</li>
<li>height: height in meters</li>
<li>weight: weight in kilograms</li>
</ul>
<p>To import data from Microsoft Excel, we use <strong>File &gt; Import &gt; Excel spreadsheet</strong>. First click <strong>Browse</strong> to locate the file to be imported:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/import-excel-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Take special note of the <strong>Preview</strong> at the bottom of the dialog box. Our dataset has the variable names listed in the first row of the spreadsheet, so we tick the <strong>Import first row as variable names</strong> checkbox. We don’t want to <strong>Import all data as strings</strong> (strings are character, or text variables), so we leave this unchecked. We finalise the process by clicking <strong>OK</strong>.</p>
<p>As always, check the Data Browser to confirm that the data were imported successfully.</p>
</section>
<section id="generating-new-variables" class="level2">
<h2 class="anchored" data-anchor-id="generating-new-variables">Generating new variables</h2>
<p>Our health survey data contains information on height and weight. We often summarise body size using BMI: body mass index which is calculated as: <span class="math inline">\(\frac{\text{weight (kg)}}{(\text{height (m)})^2}\)</span></p>
<p>To generate a new variable, we use <strong>Data &gt; Create or change data &gt; Create new variable</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/gen-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<ol type="1">
<li>type the name of the new variable, BMI, in the Variable name box.</li>
<li>enter the formula to calculate the variable in “Specify a value or an expression”. This can be done in one of two ways:</li>
</ol>
<p><strong>Option 1:</strong> click <strong>Create</strong> to open the Expression Builder dialog box. This box allows you to build the formula interactively:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/gen-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Clicking <strong>Variables</strong> in the lower-left-hand pane shows a list of variables in the lower-middle pane of the window. We want to create a new formula of <span class="math inline">\(\text{weight } \div \text{ height} ^2\)</span>. Double-clicking a variable name moves that variable into the formula builder. To build our BMI formula:</p>
<ol type="i">
<li>double-click <code>weight</code></li>
<li>click the <strong>/</strong> button (to represent <span class="math inline">\(\div\)</span>). Note that you can type the <strong>/</strong> symbol instead of clicking the button</li>
<li>double-click <code>height</code></li>
<li>click the <strong>^</strong> button (to represent “to the power of”) - again you can type the <strong>^</strong> symbol</li>
<li>enter <code>2</code> (as ^2 represents “to the power of 2”, or “squared”</li>
</ol>
<p>Your completed window should look like:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/gen-03.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Click <strong>OK</strong> to return to the generate dialog box, which now should appear as:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/gen-04.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p><strong>Option 2:</strong> if you are entering a simple formula, you can type the formula directly into the expression using your keyboard.</p>
<p>Click <strong>OK</strong> to generate your new variable.</p>
<p>[Command: <code>generate BMI = weight / height ^ 2</code>]</p>
<p>We should check the construction of the new variable by examining the Data Browser:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/gen-05.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>In the general population, BMI ranges between about 15 to 30. It appears that BMI has been correctly generated in this example.</p>
</section>
<section id="summarising-data-by-another-variable" class="level2">
<h2 class="anchored" data-anchor-id="summarising-data-by-another-variable">Summarising data by another variable</h2>
<p>We will often want to calculate the same summary statistics by another variable. For example, we might want to calculate summary statistics for BMI for males and females separately. We can do this in Stata by defining sex as a <em>by-variable</em>. Many Stata commands (and dialog boxes) allow for a by-variable. For example, to obtain summary statistics for BMI by sex (note that sex has been given a value label, as described in Module 1):</p>
<ol type="1">
<li>Define <code>BMI</code> as our <strong>Variable</strong> in the <strong>Statistics &gt; Summaries, tables, and tests &gt; Summary and descriptive statistics &gt; Summary statistics</strong> dialog box.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/summ-by-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<ol start="2" type="1">
<li>Click the <strong>by/if/in</strong> tab, tick <strong>Repeat command by groups</strong>, and select the variable you want to be the <em>by-variable</em>. In this case, we choose <code>sex</code> and then click <strong>OK</strong>.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/summ-by-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>[Command: <code>by sex, sort : summarize BMI</code>]</p>
<p>The by-variable will tell Stata to repeat the <code>summarize</code> command for each distinct value of <code>sex</code>. Hence, your by-variable must be a discrete variable with only a relatively small number of categories.</p>
<p>The following results appear:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>. by sex, sort <span class="sc">:</span> summarize BMI</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">-----------------------------------------------------------------------------------</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ot">-&gt;</span> sex <span class="ot">=</span> Male</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    Variable <span class="sc">|</span>        Obs        Mean    Std. Dev.       Min        Max</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+---------------------------------------------------------</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>         BMI <span class="sc">|</span>        <span class="dv">513</span>    <span class="fl">28.29561</span>    <span class="fl">5.204975</span>   <span class="fl">16.47519</span>   <span class="fl">57.23643</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="sc">-----------------------------------------------------------------------------------</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="ot">-&gt;</span> sex <span class="ot">=</span> Female</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    Variable <span class="sc">|</span>        Obs        Mean    Std. Dev.       Min        Max</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+---------------------------------------------------------</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>         BMI <span class="sc">|</span>        <span class="dv">627</span>    <span class="fl">27.81434</span>    <span class="fl">6.380523</span>   <span class="fl">9.209298</span>   <span class="fl">52.59515</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, we have calculated summary statistics separately for Males and Females. A form of the <strong>by</strong> tab appears in many Stata windows. For example, we can create separate histograms for males and females using the same two-step process:</p>
<ol type="1">
<li>Define <code>BMI</code> as the variable to be plotted</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/hist-by-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<ol start="2" type="1">
<li>Define <code>sex</code> as a <em>by-variable</em> by completing the <strong>By</strong> tab:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/hist-by-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>This produces the following graph:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/hist-by-03.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
</section>
<section id="recoding-data" class="level2">
<h2 class="anchored" data-anchor-id="recoding-data">Recoding data</h2>
<p>One task that is common in statistical computing is to recode variables. For example, we might want to group some categories of a categorical variable, or to present a continuous variable in a categorical way.</p>
<p>In this example, we can recode BMI into the following categories as suggested by the World Health Organisation [footnote]:</p>
<ul>
<li>Underweight: BMI &lt; 18.5</li>
<li>Normal weight: 18.5 <span class="math inline">\(\le\)</span> BMI &lt; 25</li>
<li>Pre-obesity: 25 <span class="math inline">\(\le\)</span> BMI &lt; 30</li>
<li>Obesity Class I: 30 <span class="math inline">\(\le\)</span> BMI &lt; 35</li>
<li>Obesity Class II: 35 <span class="math inline">\(\le\)</span> BMI &lt; 40</li>
<li>Obesity Class III: BMI <span class="math inline">\(\ge\)</span> 40</li>
</ul>
<p>To recode data in Stata, we use the <strong>Recode categorical variable</strong> command. It may seem odd to use a command called <strong>Recode categorical variable</strong> to recode BMI, a continuous variable, but that is just the name Stata uses for its recode command.</p>
<ol type="1">
<li>Click <strong>Data &gt; Create or change data &gt; Other variable-transformation commands &gt; Recode categorical variable</strong> to open the <strong>recode</strong> dialog box.</li>
<li>Choose <code>BMI</code> as the variable to be recoded from.</li>
<li>Enter the recoding rules. To recode from a range of values to a new category while assigning a value label, we enter the recoding rule in the following form:</li>
</ol>
<p>(<em>a</em> / <em>b</em> = <em>c</em> “label”) where:</p>
<ul>
<li><em>a</em> is the lower limit of the range to be recoded from</li>
<li><em>b</em> is the upper limit of the range to be recoded from</li>
<li><em>c</em> is the value of the new category to be recoded to</li>
<li><em>label</em> is the label to assign to the category <em>c</em></li>
</ul>
<p>It is important to note that the values of <em>a</em> and <em>b</em> are inclusive; and we can use the words <code>min</code> and <code>max</code> to represent the smallest and largest values respectively.</p>
<p>So to recode the underweight category, we would enter: <code>(min / 18.4999 = 1 "Underweight")</code> Similarly, for the normal weight category, we would enter: <code>(18.5 / 24.9999 = 2 "Normal weight")</code></p>
<p>Your completed recode dialog box should look as follows:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mod02/stata/recode-01.png" class="img-fluid figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li><strong>Do not forget this step!</strong> To recode into a new variable, we <strong>must</strong> click the options tab to give the name of the new variable. If this step is not performed, Stata will overwrite the initial variable with the recoded version. Here, we tell Stata to generate a new variable called bmi_category:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mod02/stata/recode-02.png" class="img-fluid figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p>Click <strong>OK</strong> to complete the recoding.</p>
<p>Note that the default label for the new recoded variable <code>bmi_category</code> is <code>RECODE of BMI</code>. This can be relabelled in the usual way: click on <code>bmi_category</code> in the <strong>Variables</strong> window, then enter a name such as <code>BMI Category</code> in the <strong>Label</strong> box in the <strong>Properties</strong> window.</p>
</section>
<section id="computing-binomial-probabilities-using-the-hand-calculator-in-stata" class="level2">
<h2 class="anchored" data-anchor-id="computing-binomial-probabilities-using-the-hand-calculator-in-stata">Computing binomial probabilities using the Hand calculator in Stata</h2>
<p>There are three Stata functions that we can use to calculate probabilities based on the binomial distribution: <code>binomialp</code>, <code>binomial</code> and <code>binomialtail</code>. Stata provides a description of the function in the <strong>Expression Builder</strong>, summarised below.</p>
<div class="cell">
<div class="cell-output-display">

<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; width: 95%; margin-left: auto; margin-right: auto;  " id="tab:binfuns">
<caption style="caption-side: top; text-align: center;">Summary of Stata's binomial functions</caption><colgroup><col><col><col></colgroup><tbody><tr>
<th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 0pt; font-weight: bold;">Function</th><th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">Description</th><th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 0pt 6pt 6pt; font-weight: bold;">Example</th></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 0pt; font-weight: normal;">binomialp(n,k,p)</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">The probability of observing k successes in n trials when the probability of a success on one trial is p</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 0pt 6pt 6pt; font-weight: normal;">Probability of observing 3 smokers from 6 people</td></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 0pt; font-weight: normal;">binomial(n,k,p)</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">The probability of observing k or fewer successes in n trials when the probability of a success on one trial is p</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 0pt 6pt 6pt; font-weight: normal;">Probability of observing 2 or fewer smokers from 6 people</td></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 0pt; font-weight: normal;">binomialtail(n,k,p)</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">The probability of observing k or more successes in n trials when the probability of a success on one trial is p</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 0pt 6pt 6pt; font-weight: normal;">Probability of observing 4 or more smokers from 6 people</td></tr>
</tbody></table>

</div>
</div>
<p>To do the computation for part (a) in Worked Example 2.1, go to <strong>Data &gt; Other utilities &gt; Hand calculator</strong> from the main menu in Stata.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/binomial-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>In the dialog box, click <strong>Create…</strong> to bring up the <strong>Expression Builder</strong> dialog box. In the <strong>Categories</strong> box, click on <strong>Functions</strong> to expand the list, then scroll down to <strong>Statistical</strong>, expand the list again and select <strong>Binomial</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/binomial-02.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>A list of functions will pop up to the right of the <strong>Categories</strong> box. Double click on <strong>binomialp()</strong> which will populate the top of the expression builder box with <code>binomialp(n,k,p)</code>. Following the instructions at the bottom of the box:</p>
<ul>
<li><em>k</em> is the number of successes, here, the number of smokers (i.e.&nbsp;k=3);</li>
<li><em>n</em> is the number of trials (i.e.&nbsp;n=6);</li>
<li>and <em>p</em> is probability of drawing a smoker from the population, which is 19.8% (i.e.&nbsp;p=0.198).</li>
</ul>
<p>Replace each of these with the appropriate number into the box as shown below.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/binomial-03.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Click the <strong>OK</strong> button in the Expression Builder box, then click <strong>OK</strong> or <strong>Submit</strong> in the main dialog box. The probability is now displayed on your Results screen as <code>.08008454</code> which rounds off to 0.08 as shown in part (a) of Worked Example 2.1. (Note that Stata doesn’t print the 0 in front of the decimal point in the output.)</p>
<p>[Command: <code>display binomialp(6, 3, 0.198)</code>]</p>
<p>To calculate the upper tail of probability in part (b), go to <strong>Data &gt; Other utilities &gt; Hand calculator</strong> from the main menu and bring up the <strong>Expression Builder</strong> box again. You may need to clear the text in your Expression box from your previous display command.</p>
<p>In the <strong>Categories</strong> box, navigate to <strong>Binomial</strong> and select it as you had before. Now double click on <strong>binomialtail()</strong> which will populate the top of the expression builder box with <code>binomialtail(n,k,p)</code>. To obtain P(X <span class="math inline">\(\ge\)</span> 4) from 6 trials, <em>n</em>=6, <em>k</em>=4 and <em>p</em>=0.198. When you are done, click the <strong>OK</strong> button in the <strong>Expression Builder</strong> box to get the below in the display dialog box:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/binomial-04.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Click <strong>OK</strong> or <strong>Submit</strong> when you are done. [Command: <code>display binomialtail(6, 4, 0.198)</code>]</p>
<p>For the lower tail for part (c), choose or double-click on <strong>binomial()</strong> from the list of functions. To obtain P(X <span class="math inline">\(\le\)</span> 2) from 6 trials, enter <em>n</em>=6, <em>k</em>=2 and <em>p</em>=0.198.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/binomial-05.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Click <strong>OK</strong> or <strong>Submit</strong> when you are done. [Command: <code>display binomial(6, 2, 0.198)</code>]</p>
</section>
<section id="computing-probabilities-from-the-normal-distribution-using-the-hand-calculator-in-stata" class="level2">
<h2 class="anchored" data-anchor-id="computing-probabilities-from-the-normal-distribution-using-the-hand-calculator-in-stata">Computing probabilities from the normal distribution using the Hand calculator in Stata</h2>
<p>From Stata, the probability using a normal distribution can be obtained from the display command via <strong>Data &gt; Other utilities &gt; Hand calculator</strong> as shown in Worked example 2.1. In the dialog box, click the <strong>Create…</strong> button to bring up the <strong>Expression Builder</strong> dialog box. In the <strong>Categories</strong> box, click on <strong>Functions</strong> to expand the list, then scroll down to <strong>Statistical</strong> and expand the list again and select <strong>Normal</strong> this time. Double-click on <strong>normal()</strong> to populate the top of the expression builder box with <code>normal(z)</code>.</p>
<p>The instructions at the bottom of the box explain that this is the cumulative standard normal distribution which means it gives P(Z&lt;z) in Stata. In other words, the normal() function gives you the <strong>lower tail</strong> probability from the standard normal distribution. To obtain P(Z&gt;0.5), edit the box to <code>1-normal(0.5)</code> as shown below.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="img/mod02/stata/normal-01.png" class="img-fluid" style="width:66.0%"></p>
</div>
</div>
<p>Click <strong>OK</strong>, then <strong>Submit</strong> to obtain the same value as from the table. [Command: <code>display 1-normal(0.5)</code>]</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-probability.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Probability and probability distributions</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./02.2-probability-R.html" class="pagination-link">
        <span class="nav-page-text"><strong>2</strong> R notes</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>